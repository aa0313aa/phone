<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>臾몄쓽 諛??덉빟 - ?꾧뎅紐⑤컮??/title>
    <meta
      name="description"
      content="?고뀒??利됱떆?곷떞! 移댄넚(k090912k) ?먮뒗 ?꾪솕(010-8290-9536) 24?쒓컙 臾대즺?곷떞. ?뱀씪泥섎━"
    />
    <meta
      name="keywords"
      content="?고뀒?ъ긽??誘몃궔?붽툑?????⑷컻?듭긽??鍮꾨?硫닿컻?듭삁??臾대즺?곷떞"
    />
    <meta name="author" content="?꾧뎅紐⑤컮?? />
    <meta name="google-adsense-account" content="ca-pub-8628294888817937" />
    <meta name="robots" content="index,follow" />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://xn--2p7b1pl7d.shop/contact.html" />
    <meta property="og:title" content="臾몄쓽 諛??덉빟 - ?꾧뎅紐⑤컮?? />
    <meta
      property="og:description"
      content="?고뀒??利됱떆?곷떞! 移댄넚(k090912k) ?먮뒗 ?꾪솕(010-8290-9536) 24?쒓컙 臾대즺?곷떞. ?뱀씪泥섎━"
    />
    <meta
      property="og:image"
      content="https://xn--2p7b1pl7d.shop/assets/img/og-banner.png"
    />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="臾몄쓽 諛??덉빟 - ?꾧뎅紐⑤컮?? />
    <meta
      name="twitter:description"
      content="?고뀒??利됱떆?곷떞! 移댄넚(k090912k) ?먮뒗 ?꾪솕(010-8290-9536) 24?쒓컙 臾대즺?곷떞. ?뱀씪泥섎━"
    />
    <meta
      name="twitter:image"
      content="https://xn--2p7b1pl7d.shop/assets/img/og-banner.png"
    />
    <meta name="twitter:domain" content="?꾧뎅紐⑤컮?? />

    <link rel="canonical" href="https://xn--2p7b1pl7d.shop/contact.html" />
    <link rel="icon" type="image/svg+xml" href="assets/img/favicon.svg" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
      rel="stylesheet"
    />
    <link href="assets/css/styles.css" rel="stylesheet" />
  </head>

  <body>
    <nav
      class="navbar navbar-expand-lg bg-body shadow-sm sticky-top"
      aria-label="二쇱슂 ?대퉬寃뚯씠??
    >
      <div class="container">
        <a class="navbar-brand fw-bold" href="index.html"
          ><img
            src="assets/img/favicon.svg"
            alt="?꾧뎅紐⑤컮??
            width="28"
            height="28"
            class="me-2"
          />?꾧뎅紐⑤컮??/a
        >
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#nav"
          aria-controls="nav"
          aria-expanded="false"
          aria-label="?대퉬寃뚯씠???좉?"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="nav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">??/a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="services.html">?쒕퉬??/a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="information.html">?댁슜?덈궡</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="about.html">?뚯궗?뚭컻</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="contact.html">臾몄쓽/?덉빟</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="phonetech-guide.html">?고뀒?ш??대뱶</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="phonetech-tips.html">?덉쟾?댁슜??/a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/blog/">釉붾줈洹?/a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <header class="py-5 bg-primary text-white">
      <div class="container">
        <h1 class="h2 fw-bold">臾몄쓽 / ?곷떞?덉빟</h1>
        <p class="text-white-50 mb-0">
          ?꾩닔 ??ぉ留??낅젰?섎㈃ 鍮좊Ⅴ寃??곷떞 ?꾩??쒕┰?덈떎.
        </p>
      </div>
    </header>
    <main class="py-5">
      <div class="container">
        <div class="row g-5">
          <div class="col-lg-7">
            <form
              class="needs-validation"
              novalidate
              id="contactForm"
              method="POST"
              action="https://script.google.com/macros/s/AKfycbzwr1Y2880sB6s5HeM4pwJ3QxAPweGgmmMymL97XaTwTIqvZeshMVhafRvcPBJA_63wwA/exec"
            >
              <div class="alert alert-info small" role="alert">
                <i class="bi bi-info-circle me-1"></i> ?꾨옒 ?뺣낫留뚯쑝濡??곷떞 議곌굔
                ?덈궡 諛??쒗깮 鍮꾧탳媛 媛?ν빀?덈떎. 誘쇨컧?뺣낫(二쇰?踰덊샇 ?????덈?
                ?낅젰?섏? 留덉꽭??
              </div>
              <div class="mb-3">
                <label class="form-label" for="name">?대쫫</label
                ><input class="form-control" id="name" name="?대쫫" required />
                <div class="invalid-feedback">?대쫫???낅젰?댁＜?몄슂.</div>
              </div>
              <div class="mb-3">
                <label class="form-label" for="phone">?곕씫泥?/label
                ><input
                  class="form-control"
                  id="phone"
                  name="?곕씫泥?
                  type="tel"
                  pattern="^[0-9\-]{9,13}$"
                  required
                />
                <div class="form-text">
                  ?レ옄? '-'留??낅젰 (?? 010-1234-5678)
                </div>
                <div class="invalid-feedback">
                  ?щ컮瑜??곕씫泥섎? ?낅젰?댁＜?몄슂.
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label" for="type">臾몄쓽 ?좏삎</label
                ><select class="form-select" id="type" name="臾몄쓽?좏삎" required>
                  <option value="" disabled selected>?좏깮?댁＜?몄슂</option>
                  <option>鍮꾨?硫?媛쒗넻</option>
                  <option>留ㅼ옣 諛⑸Ц</option>
                  <option>?대???留ㅼ엯</option>
                  <option>?쇰컲 ?곷떞</option>
                </select>
                <div class="invalid-feedback">臾몄쓽 ?좏삎???좏깮?댁＜?몄슂.</div>
              </div>
              <div class="mb-3">
                <label class="form-label" for="carrier">?듭떊??/label
                ><select class="form-select" id="carrier" name="?듭떊??>
                  <option value="" selected>?좏깮(?좏깮?ы빆)</option>
                  <option>SKT</option>
                  <option>KT</option>
                  <option>LGU+</option>
                  <option>?뚮쑑 / MVNO</option>
                </select>
              </div>
              <div class="mb-3">
                <label class="form-label" for="recentActive">理쒓렐媛쒗넻??/label
                ><input
                  class="form-control"
                  id="recentActive"
                  name="理쒓렐媛쒗넻??
                  type="date"
                  max="9999-12-31"
                />
                <div class="form-text">理쒓렐 ?뚯꽑/湲곌린 媛쒗넻??(?좏깮)</div>
              </div>
              <div class="mb-3">
                <label class="form-label" for="arrears">誘몃궔?곗껜</label
                ><select class="form-select" id="arrears" name="誘몃궔?곗껜">
                  <option value="" selected>?좏깮(?좏깮?ы빆)</option>
                  <option>?놁쓬</option>
                  <option>?붽툑 誘몃궔</option>
                  <option>?곗껜 ?곕젮</option>
                </select>
              </div>
              <div class="mb-3">
                <label class="form-label" for="region">吏??/label
                ><input
                  class="form-control"
                  id="region"
                  name="吏??
                  placeholder="?? ?쒖슱 媛뺣궓 / 遺???댁슫? ??
                />
              </div>
              <div class="mb-3">
                <label class="form-label" for="desired">?щ쭩吏꾪뻾諛⑹떇</label
                ><select class="form-select" id="desired" name="?щ쭩吏꾪뻾諛⑹떇">
                  <option value="" selected>?좏깮(?좏깮?ы빆)</option>
                  <option>鍮꾨?硫?媛쒗넻</option>
                  <option>留ㅼ옣 諛⑸Ц</option>
                  <option>?앸같 / ??/option>
                </select>
              </div>
              <div class="mb-3">
                <label class="form-label" for="message">?곸꽭?댁슜</label
                ><textarea
                  class="form-control"
                  id="message"
                  name="?곸꽭?댁슜"
                  rows="5"
                  placeholder="?? ?꾩씠??5 湲곕? 議곌굔 臾몄쓽"
                  required
                ></textarea>
                <div class="invalid-feedback">?곸꽭?댁슜???낅젰?댁＜?몄슂.</div>
              </div>
              <div class="mb-3 form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="agree"
                  required
                /><label class="form-check-label" for="agree"
                  >媛쒖씤?뺣낫 ?섏쭛 諛??댁슜???숈쓽?⑸땲??</label
                >
                <div class="invalid-feedback">?숈쓽媛 ?꾩슂?⑸땲??</div>
              </div>
              <div class="text-center">
                <button type="submit" class="btn btn-primary btn-lg">
                  <i class="bi bi-send me-2"></i>?곷떞 ?좎껌?섍린
                </button>
              </div>
              <div id="formResult" class="mt-3 small"></div>
            </form>
            <!-- Google Form ?먮룞 ?쒖텧 泥섎━??iframe (?덇굅???명솚) -->
            <iframe
              name="hidden_iframe"
              id="hidden_iframe"
              style="display: none"
              onload="
                if (submitted) {
                  handleFormSuccess();
                }
              "
            ></iframe>
            <!-- ?대찓?쇰줈 ?덈퉬 ?쒖텧 (FormSubmit 諛깆뾽 寃쎈줈) -->
            <form
              id="hiddenEmailForm"
              action="https://formsubmit.co/k9536k@gmail.com"
              method="POST"
              target="_blank"
              class="d-none"
            >
              <input
                type="hidden"
                name="_subject"
                value="?꾧뎅紐⑤컮???곷떞 ?덉빟"
              />
              <input type="hidden" name="_captcha" value="false" />
              <input type="hidden" name="_template" value="table" />
              <input type="hidden" name="?대쫫" id="email_name" />
              <input type="hidden" name="?곕씫泥? id="email_phone" />
              <input type="hidden" name="?좏삎" id="email_type" />
              <input type="hidden" name="?댁슜" id="email_message" />
              <input type="hidden" name="?쒖텧?쒓컖" id="email_time" />
              <!-- ?꾩슂 ?? ?쒖텧 ???대룞???꾨즺 ?섏씠吏 二쇱냼
  <input type="hidden" name="_next" value="https://yourdomain.com/thanks.html" /> -->
              <!-- ?ㅽ뙵 諛⑹????덈땲??-->
              <input type="text" name="_honey" style="display: none" />
            </form>
          </div>
          <div class="col-lg-5">
            <div class="p-4 bg-body-tertiary border rounded-3 h-100">
              <h2 class="h5">吏곸젒 ?곕씫</h2>
              <p class="small mb-1">
                <i class="bi bi-telephone me-1"></i>?꾪솕:
                <a href="tel:010-8290-9536">010-8290-9536</a>
              </p>
              <p class="small mb-1">
                <i class="bi bi-chat-dots me-1"></i>移댁뭅?ㅽ넚:
                <a
                  href="http://pf.kakao.com/_gIKxnn/chat"
                  target="_blank"
                  rel="noopener"
                  >諛붾줈媛湲?/a
                >
                <span class="badge text-bg-warning text-dark ms-1"
                  >ID: k090912k</span
                >
              </p>
              <p class="small mb-3">
                <i class="bi bi-envelope me-1"></i>?대찓??
                <a href="mailto:k9536k@gmail.com">k9536k@gmail.com</a>
              </p>
              <hr />
              <h3 class="h6 text-secondary">?좎쓽 ?ы빆</h3>
              <ul class="small mb-0">
                <li>?ㅼ젣 ?덉빟 ?뺤젙? ?곷떞?먯쓽 ?뺤씤 ??吏꾪뻾?⑸땲??</li>
                <li>誘쇨컧 ?뺣낫(怨꾩젙 鍮꾨?踰덊샇 ?????낅젰?섏? 留덉꽭??</li>
                <li>留ㅼ슦 湲됲븳 臾몄쓽???꾪솕 ?댁슜??沅뚯옣?⑸땲??</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </main>
    <footer class="py-4 bg-dark text-light">
      <div
        class="container small d-flex justify-content-between flex-wrap gap-3"
      >
        <span>짤 2025 ?꾧뎅紐⑤컮??/span>
        <a class="link-light text-decoration-none" href="#top" id="backToTop"
          >留⑥쐞濡?/a
        >
      </div>
    </footer>

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "??,
            "item": "https://xn--2p7b1pl7d.shop/"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "臾몄쓽/?덉빟",
            "item": "https://xn--2p7b1pl7d.shop/contact.html"
          }
        ]
      }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/main.js"></script>
    <script>
      /* ?곷떞/?덉빟 UX 媛뺥솕 + ?덈퉬 ?대찓??寃쎈줈 + ?덉빟 由ъ뒪???곕え */
      (() => {
        const form = document.getElementById('contactForm');
        const result = document.getElementById('formResult');
        const kakaoLink = 'http://pf.kakao.com/_gIKxnn/chat';
        const emailBtn = document.getElementById('emailSubmit');
        const emailForm = document.getElementById('hiddenEmailForm');
        const reservationsContainerId = 'reservationsTableContainer';
        if (!form) return;

        // ??媛??ы띁
        const fv = (sel) => (form.querySelector(sel)?.value || '').trim();

        // ?ㅽ뙵 諛⑹?(?덈땲?? ?꾨뱶 異붽?
        const honeypot = document.createElement('input');
        honeypot.type = 'text';
        honeypot.name = 'website';
        honeypot.autocomplete = 'off';
        honeypot.style.position = 'absolute';
        honeypot.style.left = '-9999px';
        honeypot.tabIndex = -1;
        form.appendChild(honeypot);

        // 理쒓렐 ?쒖텧 濡쒖뺄 ?쒖떆 ?곸뿭
        const recentBox = document.createElement('div');
        recentBox.className = 'mt-4 small';
        recentBox.innerHTML =
          '<strong>理쒓렐 ?쒖텧(濡쒖뺄 ???:</strong><div id="recentSubmissions" class="mt-2 d-flex flex-column gap-1"></div>';
        form.parentElement?.appendChild(recentBox);

        function renderRecent() {
          const listEl = document.getElementById('recentSubmissions');
          if (!listEl) return;

          const items = JSON.parse(
            localStorage.getItem('recentReservations') || '[]'
          );

          // ?띿뒪???몃뱶濡쒕쭔 ?뚮뜑留곹빐 XSS瑜?諛⑹?
          listEl.replaceChildren();
          for (const i of items) {
            const row = document.createElement('div');
            row.className = 'border rounded p-2 bg-body-tertiary';

            const line1 = document.createElement('div');
            line1.textContent = `${i.time} 쨌 ${i.name} / ${i.type}`;

            const line2 = document.createElement('span');
            line2.className = 'text-secondary';
            line2.textContent = i.phone;

            row.appendChild(line1);
            row.appendChild(line2);
            listEl.appendChild(row);
          }
        }
        renderRecent();

        form.addEventListener('submit', async (e) => {
          e.preventDefault(); // 湲곕낯 ?쒖텧 留됯린

          // ?좏슚??寃??
          if (!form.checkValidity()) {
            form.classList.add('was-validated');
            result.innerHTML =
              '<span class="text-danger">?낅젰媛믪쓣 ?뺤씤?댁＜?몄슂.</span>';
            return;
          }
          if (honeypot.value) {
            // ?ㅽ뙵 ?섏떖
            result.innerHTML =
              '<span class="text-warning">?쒖텧??李⑤떒?섏뿀?듬땲???ㅽ뙵 ?섏떖).</span>';
            return;
          }

          // ?쒖텧 以??덈궡 硫붿떆吏
          result.innerHTML =
            '<span class="text-info"><i class="bi bi-hourglass-split"></i> ?곷떞 ?붿껌???꾩넚以묒엯?덈떎??/span>';

          try {
            // FormData濡??낅젰媛??섏쭛
            const formData = new FormData(form);

            // Google Apps Script濡??꾩넚
            const response = await fetch(form.action, {
              method: 'POST',
              body: formData,
            });

            const data = await response.json();

            if (data.result === 'success') {
              // ?깃났 硫붿떆吏 ?쒖떆
              result.innerHTML =
                '<div class="alert alert-success"><i class="bi bi-check-circle-fill me-2"></i><strong>?곷떞 ?붿껌???묒닔?섏뿀?듬땲??</strong><br>鍮좊Ⅸ ?쒓컙 ?댁뿉 ?곕씫?쒕━寃좎뒿?덈떎.</div>';

              // 濡쒖뺄 ???理쒓렐 5嫄?
              const localData = {
                name: fv('#name'),
                phone: fv('#phone'),
                type: fv('#type'),
                region: fv('#region'),
                submittedAt: new Date().toLocaleString(),
              };

              const arr = JSON.parse(
                localStorage.getItem('recentReservations') || '[]'
              );
              arr.unshift({
                time: localData.submittedAt,
                name: localData.name,
                phone: localData.phone,
                type: localData.type,
                region: localData.region,
              });
              localStorage.setItem(
                'recentReservations',
                JSON.stringify(arr.slice(0, 5))
              );
              renderRecent();

              // ??珥덇린??
              form.reset();
              form.classList.remove('was-validated');
            } else {
              result.innerHTML =
                '<div class="alert alert-warning"><i class="bi bi-exclamation-triangle-fill me-2"></i>?쒖텧 ?ㅻ쪟媛 諛쒖깮?덉뒿?덈떎. ?좎떆 ???ㅼ떆 ?쒕룄?댁＜?몄슂.</div>';
            }
          } catch (error) {
            console.error('?쒖텧 ?ㅻ쪟:', error);
            result.innerHTML =
              '<div class="alert alert-danger"><i class="bi bi-x-circle-fill me-2"></i>?ㅽ듃?뚰겕 ?ㅻ쪟媛 諛쒖깮?덉뒿?덈떎. ?좎떆 ???ㅼ떆 ?쒕룄?댁＜?몄슂.</div>';
          }
        });

        // ?대찓?쇰줈 ?덈퉬 ?꾩넚 (FormSubmit ?쒖텧)
        emailBtn?.addEventListener('click', (e) => {
          e.preventDefault();
          if (!form.checkValidity()) {
            form.classList.add('was-validated');
            result.innerHTML =
              '<span class="text-danger">?낅젰媛믪쓣 ?뺤씤?댁＜?몄슂.</span>';
            return;
          }
          if (!emailForm) return;

          const action = emailForm.getAttribute('action') || '';
          if (action.includes('YOUR_EMAIL')) {
            result.innerHTML =
              '<span class="text-warning">愿由ъ옄 ?ㅼ젙 ?꾩슂: contact.html ?곷떒???대찓??二쇱냼瑜??ㅼ젣 二쇱냼濡?諛붽퓭二쇱꽭??</span>';
            return;
          }

          const submittedAt = new Date().toLocaleString();
          document.getElementById('email_name').value = fv('#name');
          document.getElementById('email_phone').value = fv('#phone');
          document.getElementById('email_type').value = fv('#type');
          document.getElementById('email_message').value = fv('#message');
          document.getElementById('email_time').value = submittedAt;

          emailForm.submit();
          result.innerHTML =
            '<span class="text-success">?대찓???쒖텧 李쎌씠 ????쑝濡??대졇?듬땲?? ?꾨즺 硫붿떆吏瑜??뺤씤?댁＜?몄슂.</span>';
          form.reset();
          form.classList.remove('was-validated');
        });
      })();
      // --- ?덉빟 由ъ뒪???곕え 濡쒖쭅 ---
      async function fetchBaseReservations() {
        try {
          // 留뚯빟 Google Sheets CSV媛 吏?뺣릺?덈떎硫??곗꽑 ?ъ슜
          const csvUrl = document
            .querySelector('meta[name="reservations-csv-url"]')
            ?.content?.trim();
          if (csvUrl) {
            const resCsv = await fetch(csvUrl, { cache: 'no-store' });
            if (resCsv.ok) {
              const text = await resCsv.text();
              const parsed = parseCsvReservations(text);
              if (parsed.length) return parsed;
            }
          }
          // 湲곕낯 濡쒖뺄 ?곕え JSON
          const res = await fetch('/assets/data/reservations.json', {
            cache: 'no-store',
          });
          if (!res.ok) return generateDemoReservations();
          const data = await res.json();
          return Array.isArray(data) ? data : generateDemoReservations();
        } catch (e) {
          return generateDemoReservations();
        }
      }
      function generateDemoReservations() {
        // ?ㅼ젣泥섎읆 蹂댁씠???곕え ?곗씠???앹꽦
        const regions = [
          '?쒖슱 媛뺣궓',
          '?쒖슱 媛뺤꽌',
          '?몄쿇 遺??,
          '寃쎄린 ?섏썝',
          '寃쎄린 遺꾨떦',
          '遺???댁슫?',
          '?援??숈꽦濡?,
          '愿묒＜ 異⑹옣濡?,
          '????붿궛',
          '?몄궛 ?쇱궛',
        ];
        const methods = ['鍮꾨?硫닿컻??, '留ㅼ옣諛⑸Ц', '?앸같諛쒖넚'];
        const statuses = ['?묒닔?꾨즺', '吏꾪뻾以?, '?꾨즺'];
        const names = [
          '源?뗢뿃',
          '?닳뿃??,
          '諛뺚뿃??,
          '理쒋뿃??,
          '?뺚뿃??,
          '媛뺚뿃??,
          '議겸뿃??,
          '?ㅲ뿃??,
          '?β뿃??,
          '?꾟뿃??,
        ];
        const result = [];
        const now = new Date();
        for (let i = 0; i < 15; i++) {
          const datetime = new Date(
            now - Math.random() * 7 * 24 * 60 * 60 * 1000
          );
          result.push({
            region: regions[Math.floor(Math.random() * regions.length)],
            datetime: datetime.toLocaleString('ko-KR', {
              month: 'numeric',
              day: 'numeric',
              hour: '2-digit',
              minute: '2-digit',
            }),
            name: names[Math.floor(Math.random() * names.length)],
            phone: `010-****-${String(Math.floor(Math.random() * 9000) + 1000)}`,
            method: methods[Math.floor(Math.random() * methods.length)],
            status: statuses[Math.floor(Math.random() * statuses.length)],
          });
        }
        return result.sort((a, b) => b.datetime.localeCompare(a.datetime));
      }
      function parseCsvReservations(csvText) {
        // ?ㅻ뜑 媛?? region,datetime,name,phone,method,status
        const lines = csvText.split(/\r?\n/).filter((l) => l.trim().length > 0);
        if (lines.length < 2) return [];
        const header = lines[0].split(',').map((h) => h.trim().toLowerCase());
        const idx = (h) => header.indexOf(h);
        const out = [];
        for (let i = 1; i < lines.length; i++) {
          const cols = lines[i].split(',');
          if (cols.length < 2) continue;
          out.push({
            region: cols[idx('region')]?.trim() || '',
            datetime: cols[idx('datetime')]?.trim() || '',
            name: cols[idx('name')]?.trim() || '',
            phone: cols[idx('phone')]?.trim() || '',
            method: cols[idx('method')]?.trim() || '',
            status: cols[idx('status')]?.trim() || '',
          });
        }
        return out;
      }
      function maskName(name) {
        if (!name) return '';
        if (name.length < 2) return name;
        return name[0] + '*' + name.slice(2);
      }
      function maskPhone(phone) {
        return phone.replace(/(\d{3})\d{2,4}(\d{4})/, '$1-****-$2');
      }
      function getMergedReservations(base) {
        const local = JSON.parse(
          localStorage.getItem('allReservationsDemo') || '[]'
        );
        return [...local, ...base];
      }
      function paginate(items, page, perPage) {
        const total = items.length;
        const pages = Math.ceil(total / perPage);
        const start = (page - 1) * perPage;
        return {
          page,
          pages,
          total,
          slice: items.slice(start, start + perPage),
        };
      }
      async function renderReservations() {
        const wrap = document.getElementById('reservationsTableContainer');
        if (!wrap) return;
        const searchInput = document.getElementById('reservationSearch');
        const pageSelect = document.getElementById('reservationPage');
        const perPage = 10;
        const base = await fetchBaseReservations();
        let merged = getMergedReservations(base);
        const keyword = (searchInput?.value || '').trim();
        if (keyword) {
          merged = merged.filter(
            (r) =>
              r.name.includes(keyword) ||
              r.region.includes(keyword) ||
              r.method.includes(keyword)
          );
        }
        const currentPage = parseInt(pageSelect?.value || '1', 10);
        const { page, pages, slice } = paginate(merged, currentPage, perPage);
        const tbody = document.getElementById('reservationsBody');
        if (tbody) {
          tbody.innerHTML = slice
            .map((r, idx) => {
              const rowNum = (page - 1) * perPage + idx + 1;
              const statusClass =
                r.status === '?꾨즺'
                  ? 'success'
                  : r.status === '吏꾪뻾以?
                    ? 'primary'
                    : 'warning';
              const statusIcon =
                r.status === '?꾨즺'
                  ? 'check-circle-fill'
                  : r.status === '吏꾪뻾以?
                    ? 'arrow-repeat'
                    : 'clock-fill';
              return `<tr class="fade-in">
        <td class="text-center text-muted fw-bold">${rowNum}</td>
        <td class="text-nowrap"><span class="badge bg-light text-dark">${r.region || '-'}</span></td>
        <td class="text-muted small">${r.datetime}</td>
        <td class="fw-semibold">${maskName(r.name)}</td>
        <td class="text-muted">${maskPhone(r.phone)}</td>
        <td><span class="badge bg-${statusClass}"><i class="bi bi-${statusIcon} me-1"></i>${r.status}</span></td>
      </tr>`;
            })
            .join('');
        }
        // ?섏씠吏 ?좏깮 UI 援ъ꽦
        if (pageSelect) {
          pageSelect.innerHTML = Array.from(
            { length: pages || 1 },
            (_, i) =>
              `<option value="${i + 1}" ${i + 1 === page ? 'selected' : ''}>?섏씠吏 ${i + 1}/${pages || 1}</option>`
          ).join('');
        }
      }
      document.addEventListener('DOMContentLoaded', () => {
        // ?덉빟 由ъ뒪??UI ?쎌엯
        const target = document.querySelector('#contactForm')?.parentElement;
        if (target && !document.getElementById('reservationsTableContainer')) {
          const box = document.createElement('div');
          box.className = 'mt-5 p-4 bg-white border rounded-3 shadow-sm';
          box.innerHTML = `
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="h5 mb-0 fw-bold text-primary">
          <i class="bi bi-clock-history me-2"></i>?ㅼ떆媛??덉빟 ?꾪솴
          <span class="badge bg-success ms-2 pulse-animation">LIVE</span>
        </h2>
        <button id="reservationRefresh" class="btn btn-sm btn-outline-primary">
          <i class="bi bi-arrow-clockwise me-1"></i>?덈줈怨좎묠
        </button>
      </div>
      <div class="mb-3 d-flex justify-content-end">
        <input id="reservationSearch" class="form-control form-control-sm" style="max-width:200px" placeholder="?뵇 吏???대쫫 寃??>
      </div>
      <div class="table-responsive">
        <table class="table table-hover align-middle mb-0" style="font-size:0.9rem;">
          <thead class="table-primary">
            <tr>
              <th class="text-center" style="width:50px"><i class="bi bi-hash"></i></th>
              <th><i class="bi bi-geo-alt-fill me-1"></i>吏??/th>
              <th><i class="bi bi-clock-fill me-1"></i>?묒닔?쒓컙</th>
              <th><i class="bi bi-person-fill me-1"></i>怨좉컼紐?/th>
              <th><i class="bi bi-telephone-fill me-1"></i>?곕씫泥?/th>
              <th><i class="bi bi-clipboard-check-fill me-1"></i>?곹깭</th>
            </tr>
          </thead>
          <tbody id="reservationsBody"></tbody>
        </table>
      </div>
      <div class="d-flex justify-content-between align-items-center mt-3">
        <select id="reservationPage" class="form-select form-select-sm" style="width:120px"></select>
        <small class="text-muted">
          <i class="bi bi-shield-check me-1"></i>媛쒖씤?뺣낫???먮룞?쇰줈 留덉뒪??泥섎━?⑸땲??
        </small>
      </div>
    `;
          box.id = 'reservationsTableContainer';
          target.appendChild(box);
          const searchInput = box.querySelector('#reservationSearch');
          const pageSelect = box.querySelector('#reservationPage');
          const refreshBtn = box.querySelector('#reservationRefresh');
          searchInput.addEventListener('input', () => {
            pageSelect.value = '1';
            renderReservations();
          });
          pageSelect.addEventListener('change', () => renderReservations());
          refreshBtn.addEventListener('click', () => {
            refreshBtn.innerHTML =
              '<i class="bi bi-arrow-clockwise me-1 spinner-border spinner-border-sm"></i>?덈줈怨좎묠';
            setTimeout(() => {
              renderReservations();
              refreshBtn.innerHTML =
                '<i class="bi bi-arrow-clockwise me-1"></i>?덈줈怨좎묠';
            }, 500);
          });
          // ?먮룞 ?덈줈怨좎묠 (30珥덈쭏??
          setInterval(() => renderReservations(), 30000);
          renderReservations();
        }

        // 諛⑸Ц??異붿쟻 湲곕뒫
        function trackVisitor() {
          const today = new Date().toISOString().split('T')[0]; // YYYY-MM-DD
          const visitKey = 'dailyVisits';
          const visits = JSON.parse(localStorage.getItem(visitKey) || '{}');

          // ?ㅻ뒛 ?좎쭨 移댁슫??利앷?
          visits[today] = (visits[today] || 0) + 1;

          // 30???댁쟾 ?곗씠?곕뒗 ??젣
          const thirtyDaysAgo = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);
          Object.keys(visits).forEach((date) => {
            if (new Date(date) < thirtyDaysAgo) delete visits[date];
          });

          localStorage.setItem(visitKey, JSON.stringify(visits));
        }

        // 諛⑸Ц???듦퀎 ?뺤씤 ?⑥닔 (肄섏넄?먯꽌 ?ъ슜)
        window.getVisitorStats = function () {
          const visits = JSON.parse(
            localStorage.getItem('dailyVisits') || '{}'
          );
          const sorted = Object.entries(visits).sort((a, b) =>
            b[0].localeCompare(a[0])
          );
          console.log('=== ?쇰퀎 諛⑸Ц???듦퀎 (理쒓렐 30?? ===');
          sorted.forEach(([date, count]) => {
            console.log(`${date}: ${count}紐?);
          });
          const total = sorted.reduce((sum, [_, count]) => sum + count, 0);
          console.log(`珥?諛⑸Ц: ${total}紐?);
          return visits;
        };

        // ?섏씠吏 濡쒕뱶 ??諛⑸Ц 湲곕줉
        trackVisitor();
      });
    </script>
    <!-- Floating Kakao chat shortcut -->
    <div class="floating-chat" aria-label="移댁뭅?ㅽ넚 ?곷떞 諛붾줈媛湲?>
      <a href="http://pf.kakao.com/_gIKxnn/chat" target="_blank" rel="noopener">
        <i class="bi bi-chat-dots-fill"></i><span>移댄넚 ?곷떞</span>
      </a>
    </div>
  </body>
</html>

